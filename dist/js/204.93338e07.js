"use strict";(self["webpackChunkcompleted"]=self["webpackChunkcompleted"]||[]).push([[204],{2204:function(t,s,a){a.r(s),a.d(s,{default:function(){return O}});var e=a(3396),l=a(9242),i=a(7139);const o=t=>((0,e.dD)("data-v-08c68bf6"),t=t(),(0,e.Cn)(),t),d={class:"modal fade",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modd"},c={class:"modal-dialog"},n={class:"modal-content"},r=o((()=>(0,e._)("div",{class:"modal-header"},[(0,e._)("h5",{class:"modal-title",id:"exampleModalLabel"},"新增電視牆"),(0,e._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1))),h={class:"modal-body"},p={class:"reh"},u=o((()=>(0,e._)("p",null,"標題",-1))),m=o((()=>(0,e._)("p",null,"上傳圖片網址",-1))),g=o((()=>(0,e._)("p",null,"上傳圖片檔案",-1))),b=["src"],v=o((()=>(0,e._)("label",{for:"exampleFormControlTextarea1",class:"form-label"},"產品描述",-1))),_={class:"button"},y=o((()=>(0,e._)("button",{type:"button",class:"btn btn-danger"},"取消",-1))),f={class:"top"},w={class:"row row-cols-1 row-cols-md-3 g-4"},T={class:"card"},W=["src"],x={class:"card-body row"},k={class:"col-9"},C={class:"card-title"},$={class:"card-text"},D={class:"col-3"},U={class:"row"},j={class:"col-6"},F=["onClick"],L={class:"col-6"},V=["onClick"];function z(t,s,a,o,z,H){const I=(0,e.up)("LoadIng");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(I,{active:z.isload},null,8,["active"]),(0,e._)("div",d,[(0,e._)("div",c,[(0,e._)("div",n,[r,(0,e._)("div",h,[(0,e._)("div",p,[u,(0,e.wy)((0,e._)("input",{type:"text",class:"form-control mod1","onUpdate:modelValue":s[0]||(s[0]=t=>z.TvWall.title=t)},null,512),[[l.nr,z.TvWall.title]]),m,(0,e.wy)((0,e._)("input",{type:"text",class:"form-control mod1","onUpdate:modelValue":s[1]||(s[1]=t=>z.TvWall.picture=t)},null,512),[[l.nr,z.TvWall.picture]]),g,(0,e._)("input",{type:"file",class:"form-control mod1",ref:"img",onChange:s[2]||(s[2]=(...t)=>H.upda&&H.upda(...t))},null,544),(0,e._)("img",{src:z.TvWall.picture,alt:""},null,8,b),v,(0,e.wy)((0,e._)("textarea",{class:"form-control mod1",id:"exampleFormControlTextarea1",rows:"3",placeholder:"產品描述","onUpdate:modelValue":s[3]||(s[3]=t=>z.TvWall.description=t)},null,512),[[l.nr,z.TvWall.description]])]),(0,e._)("div",_,[(0,e._)("button",{type:"button",class:"btn btn-primary",onClick:s[4]||(s[4]=(...t)=>H.okdata&&H.okdata(...t))}," 確定 "),y])])])])],512),(0,e._)("div",f,[(0,e._)("button",{type:"button",class:"btn btn-primary",onClick:s[5]||(s[5]=(...t)=>H.show&&H.show(...t))}," 新增電視牆 ")]),(0,e._)("div",w,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(z.data,(t=>((0,e.wg)(),(0,e.iD)("div",{class:"col",key:t.id},[(0,e._)("div",T,[(0,e._)("img",{src:t.picture,class:"card-img-top",alt:"..."},null,8,W),(0,e._)("div",x,[(0,e._)("div",k,[(0,e._)("h5",C,(0,i.zw)(t.title),1),(0,e._)("p",$,(0,i.zw)(t.description),1)]),(0,e._)("div",D,[(0,e._)("div",U,[(0,e._)("div",j,[(0,e._)("button",{type:"button",class:"btn btn-success",onClick:s=>{H.show(),z.TvWall=t}}," 編輯 ",8,F)]),(0,e._)("div",L,[(0,e._)("button",{type:"button",class:"btn btn-danger",onClick:s=>H.del(t)}," 刪除 ",8,V)])])])])])])))),128))])],64)}var H=a(7972),I=a.n(H),M={data(){return{mod:{},TvWall:{category:"電視牆",unit:"0",origin_price:1,price:1,is_enabled:!0},data:[],isload:!0,sstate:"",sstyle:"",smessage:[]}},inject:["mitter"],methods:{gatdata(){this.isload=!0;const t="https://vue3-course-api.hexschool.io/api/runapi/admin/products/all";this.$http.get(t).then((t=>{this.data=Object.values(t.data.products),this.data=this.data.filter((t=>"電視牆"==t.category)),this.isload=!1,console.log(this.data)}))},show(){this.mod.show()},upda(){const t="https://vue3-course-api.hexschool.io/api/runapi/admin/upload";let s=new FormData;s.append("file-to-upload",this.$refs.img.files[0]),this.$http.post(t,s).then((t=>{console.log(t.data.imageUrl),this.TvWall.picture=t.data.imageUrl}))},okdata(){if(void 0!=this.TvWall.id){this.isload=!0,this.mod.hide();const t=`https://vue3-course-api.hexschool.io/api/runapi/admin/product/${this.TvWall.id}`;this.$http.put(t,{data:this.TvWall}).then((t=>{t.data.success?(this.sstate="編輯成功",this.sstyle="rgb(0, 187, 93)",this.smessage=["以更新商品"]):(this.sstate="編輯失敗",this.sstyle=" rgb(230, 57, 57)",this.smessage=[...t.data.message]),this.mitter.emit("test",{success:this.sstate,style:this.sstyle,message:this.smessage.join("、")}),console.log(t),this.TvWall={category:"電視牆",unit:"0",origin_price:1,price:1,is_enabled:!0},this.gatdata()}))}else{this.isload=!0,this.mod.hide();const t="https://vue3-course-api.hexschool.io/api/runapi/admin/product";this.$http.post(t,{data:this.TvWall}).then((t=>{console.log(t.data),t.data.success?(this.sstate="新增成功",this.sstyle="rgb(0, 187, 93)",this.smessage=["以新增商品"]):(this.sstate="新增失敗",this.sstyle=" rgb(230, 57, 57)",this.smessage=[...t.data.message]),this.mitter.emit("test",{success:this.sstate,style:this.sstyle,message:this.smessage.join("、")}),console.log(t),this.TvWall={category:"電視牆",unit:"0",origin_price:1,price:1,is_enabled:!0},this.gatdata()}))}},del(t){this.isload=!0;const s=`https://vue3-course-api.hexschool.io/api/runapi/admin/product/${t.id}`;this.$http.delete(s).then((t=>{this.mitter.emit("test",{style:"rgb(230, 57, 57)",success:"刪除成功",message:t.data.message}),console.log(t),this.gatdata()}))}},mounted(){this.mod=new(I())(this.$refs.modd),this.mitter.emit("change",0)},created(){this.gatdata()}},Y=a(89);const K=(0,Y.Z)(M,[["render",z],["__scopeId","data-v-08c68bf6"]]);var O=K}}]);
//# sourceMappingURL=204.93338e07.js.map